/*! core 2017-07-03 */
!function(a){"function"==typeof define&&define.amd?define(["jquery","moment","jstz","jquery-jsonp","jquery-pubsub"],a):a($,moment,jstz,jsonp,pubsub)}(function(a,b,c,d,e){var f,g,h,i,j,k,l;return f=function(a,b,c){var d=2048;a.ajaxSetup({cache:!1});var e={};return e.NetworkNotConnected=function(a,b){this.code=999,this.message=a||"Connection interrupted",this.opt=b},e.NetworkNotConnected.prototype=new Error,e.NetworkTimeout=function(a,b){this.code=408,this.message=a||"Could not reach the server in time",this.opt=b},e.NetworkTimeout.prototype=new Error,e.ApiError=function(a,b){this.code=500,this.message=a||"Something went wrong on the server",this.opt=b},e.ApiError.prototype=new Error,e.ApiNotFound=function(a,b){this.code=404,this.message=a||"Could not find what you're looking for",this.opt=b},e.ApiNotFound.prototype=new Error,e.ApiBadRequest=function(a,b){this.code=400,this.message=a||"The server did not understand your request",this.opt=b},e.ApiBadRequest.prototype=new Error,e.ApiUnauthorized=function(a,b){this.code=401,this.message=a||"Your session has expired",this.opt=b},e.ApiUnauthorized.prototype=new Error,e.ApiForbidden=function(a,b){this.code=403,this.message=a||"You don't have sufficient rights",this.opt=b},e.ApiForbidden.prototype=new Error,e.ApiUnprocessableEntity=function(a,b){this.code=422,this.message=a||"Some data is invalid",this.opt=b},e.ApiUnprocessableEntity.prototype=new Error,e.ApiSubscriptionLimit=function(a,b){this.code=422,this.message=a||"You have reached your subscription limit",this.opt=b},e.ApiSubscriptionLimit.prototype=new Error,e.ApiPaymentRequired=function(a,b){this.code=402,this.message=a||"Your subscription has expired",this.opt=b},e.ApiPaymentRequired.prototype=new Error,e.ApiServerCapicity=function(a,b){this.code=503,this.message=a||"Back-end server is at capacity",this.opt=b},e.ApiServerCapicity.prototype=new Error,e.ApiAjax=function(a){a=a||{},this.useJsonp=null!=a.useJsonp?a.useJsonp:!0,this.timeOut=a.timeOut||1e4,this.responseInTz=!0},e.ApiAjax.prototype.get=function(a,b){return this.useJsonp?this._getJsonp(a,b):this._getAjax(a,b)},e.ApiAjax.prototype.post=function(a,b,c){if(this.useJsonp)throw"ApiAjax cannot post while useJsonp is true";return this._postAjax(a,b,c)},e.ApiAjax.prototype._handleAjaxSuccess=function(a,b,c){return this.responseInTz&&(b=this._fixDates(b)),a.resolve(b)},e.ApiAjax.prototype._handleAjaxError=function(a,b,c,d,f){if("abort"!=c){var g="";if("timeout"===d)a.reject(new e.NetworkTimeout(g,f));else switch(b&&(b.statusText&&b.statusText.indexOf("Notify user:")>-1&&(g=b.statusText.slice(b.statusText.indexOf("Notify user:")+13)),422==b.status&&b.responseText&&b.responseText.match(/HTTPError: \(.+\)/g).length>0&&(f={detail:b.responseText.match(/HTTPError: \(.+\)/g)[0]})),b.status){case 400:a.reject(new e.ApiBadRequest(g,f));break;case 401:a.reject(new e.ApiUnauthorized(g,f));break;case 402:a.reject(new e.ApiPaymentRequired(g,f));break;case 403:a.reject(new e.ApiForbidden(g,f));break;case 404:a.reject(new e.ApiNotFound(g,f));break;case 408:a.reject(new e.NetworkTimeout(g,f));break;case 422:a.reject(g&&g.indexOf("limit")>=0&&g.indexOf("reach")>=0?new e.ApiSubscriptionLimit(g,f):new e.ApiUnprocessableEntity(g,f));break;case 503:a.reject(new e.ApiServerCapicity(g,f));break;case 500:default:a.reject(new e.ApiError(g,f))}}},e.ApiAjax.prototype._postAjax=function(b,c,d,e){var f=a.Deferred(),g=this,h=a.ajax({type:"POST",url:b,data:JSON.stringify(this._prepareDict(c)),contentType:"application/json; charset=utf-8",timeout:d||this.timeOut,success:function(a){return g._handleAjaxSuccess(f,a,e)},error:function(a,b,c){return g._handleAjaxError(f,a,b,c,e)}}),i=f.promise();return i.abort=function(){h.abort()},i},e.ApiAjax.prototype._getAjax=function(b,c,d){var e=a.Deferred(),f=this,g=a.ajax({url:b,timeout:c||this.timeOut,success:function(a){return f._handleAjaxSuccess(e,a,d)},error:function(a,b,c){return f._handleAjaxError(e,a,b,c,d)}}),h=e.promise();return h.abort=function(){g.abort()},h},e.ApiAjax.prototype._getJsonp=function(b,c,d){var f=a.Deferred(),g=this,h=a.jsonp({url:b,type:"GET",timeout:c||this.timeOut,dataType:" jsonp",callbackParameter:"callback",success:function(a,b,c){return g._handleAjaxSuccess(f,a)},error:function(a,b){f.reject(new e.ApiError(null,d))}}),i=f.promise();return i.abort=function(){h.abort()},i},e.ApiAjax.prototype._prepareDict=function(b){return b?(a.each(b,function(a,d){c.isMoment(d)&&(b[a]=d.toJSONDate())}),b):{}},e.ApiAjax.prototype._fixDates=function(b){if("string"==typeof b||b instanceof String){if(b.endsWith("+00:00")){var d=b.length;if(25==d)return c(b.substring(0,d-6));if(32==d)return c(b.substring(0,d-6).split(".")[0])}}else if(b instanceof Object||a.isArray(b)){var e=this;a.each(b,function(a,c){b[a]=e._fixDates(c)})}return b},e.ApiUser=function(a){a=a||{},this.userId=a.userId||"",this.userToken=a.userToken||"",this.tokenType=a.tokenType||""},e.ApiUser.prototype.fromStorage=function(){this.userId=window.localStorage.getItem("userId")||"",this.userToken=window.localStorage.getItem("userToken")||"",this.tokenType=window.localStorage.getItem("tokenType")||""},e.ApiUser.prototype.toStorage=function(){window.localStorage.setItem("userId",this.userId),window.localStorage.setItem("userToken",this.userToken),window.localStorage.setItem("tokenType",this.tokenType)},e.ApiUser.prototype.removeFromStorage=function(){window.localStorage.removeItem("userId"),window.localStorage.removeItem("userToken"),window.localStorage.removeItem("tokenType")},e.ApiUser.prototype.clearToken=function(){window.localStorage.setItem("userToken",null),window.localStorage.setItem("tokenType",null)},e.ApiUser.prototype.isValid=function(){return this.userId&&this.userId.length>0&&this.userToken&&this.userToken.length>0},e.ApiUser.prototype._reset=function(){this.userId="",this.userToken="",this.tokenType=""},e.ApiAuth=function(a){a=a||{},this.urlAuth=a.urlAuth||"",this.ajax=a.ajax,this.version=a.version},e.ApiAuth.prototype.authenticate=function(b,c){var d=this.urlAuth+"?"+a.param({user:b,password:c,auth_v:2,_v:this.version}),e=a.Deferred();return this.ajax.get(d,3e4).done(function(a){"OK"==a.status?e.resolve(a.data):e.reject(a)}).fail(function(a){e.reject(a)}),e.promise()},e.ApiAuthV2=function(a){a=a||{},this.urlAuth=a.urlAuth||"",this.ajax=a.ajax,this.version=a.version},e.ApiAuthV2.prototype.authenticate=function(b,c){var d=this.urlAuth+"?"+a.param({user:b,password:c,auth_v:2,_v:this.version}),f=a.Deferred();return this.ajax.get(d,3e4).done(function(a){if("OK"==a.status)f.resolve(a.data);else{var b=null;b=a.message&&a.message.indexOf("expired")>0?new e.ApiPaymentRequired(a.message):new Error("Your username or password is not correct"),f.reject(b)}}).fail(function(a){f.reject(a)}),f.promise()},e.ApiAnonymous=function(a){a=a||{},this.ajax=a.ajax,this.urlApi=a.urlApi||"",this.version=a.version},e.ApiAnonymous.prototype.call=function(b,c,d,e){this.version&&(c=c||{},c._v=this.version);var f=this.urlApi+"/"+b+"?"+a.param(this.ajax._prepareDict(c));return this.ajax.get(f,d,e)},e.ApiAnonymous.prototype.longCall=function(a,b,c){return this.call(a,b,6e4,c)},e.ApiDataSource=function(a){a=a||{},this.collection=a.collection||"",this.urlApi=a.urlApi||"",this.user=a.user,this.ajax=a.ajax,this.version=a.version},e.ApiDataSource.prototype.exists=function(b,c){var d="exists",f=a.Deferred(),g=this,h=this.getBaseUrl()+b,i=this.getParams(c);return a.isEmptyObject(i)||(h+="?"+this.getParams(i)),this._ajaxGet(d,h).done(function(a){f.resolve(a)}).fail(function(a){g.ajax.useJsonp?f.resolve(null):a instanceof e.ApiNotFound?f.resolve(null):f.reject(a)}),f.promise()},e.ApiDataSource.prototype.get=function(b,c){var d="get",e=this.getBaseUrl()+b,f=this.getParamsDict(c);return a.isEmptyObject(f)||(e+="?"+this.getParams(f)),this._ajaxGet(d,e)},e.ApiDataSource.prototype.getIgnore404=function(b,c){var d=this,f=a.Deferred();return this.get(b,c).done(function(a){f.resolve(a)}).fail(function(a){d.ajax.useJsonp?f.resolve(null):a instanceof e.ApiNotFound?f.resolve(null):f.reject(a)}),f.promise()},e.ApiDataSource.prototype.getMultiple=function(b,c){var d="getMultiple",e=this.getBaseUrl()+b.join(",")+",",f=this.getParamsDict(c);return a.isEmptyObject(f)||(e+="?"+this.getParams(f)),this._ajaxGet(d,e)},e.ApiDataSource.prototype["delete"]=function(a){var b="delete",c=this.getBaseUrl()+a+"/delete";return this._ajaxGet(b,c)},e.ApiDataSource.prototype.deleteMultiple=function(a){var b="deleteMultiple",c=this.getBaseUrl()+a.join(",")+"/delete";return this._ajaxGet(b,c)},e.ApiDataSource.prototype.update=function(b,c,e,f,g){var h="update",i=this.getBaseUrl()+b+"/update",j=a.extend({},c);null!=e&&e.length>0&&(j._fields=a.isArray(e)?e.join(","):e);var k=i+"?"+this.getParams(j);return g||k.length>=d?this._ajaxPost(h,i,j,f):this._ajaxGet(h,k,f)},e.ApiDataSource.prototype.create=function(b,c,e,f){var g="create",h=this.getBaseUrl()+"create",i=a.extend({},b);null!=c&&c.length>0&&(i._fields=a.isArray(c)?c.join(","):c);var j=h+"?"+this.getParams(i);return f||j.length>=d?this._ajaxPost(g,h,i,e):this._ajaxGet(g,j,e)},e.ApiDataSource.prototype.createMultiple=function(b,c){var d=a.Deferred(),e=this,f=b.slice(0),g=[],h=function(a){if(a.length>0){var b=a.pop();e.create(b,c).done(function(b){return g.push(b._id),h(a)}).fail(function(a){d.reject(a)})}else d.resolve(g)};return h(f),d.promise()},e.ApiDataSource.prototype.list=function(b,c,d,e,f){b=b||"";var g="list."+b,h=this.getBaseUrl();null!=b&&b.length>0&&(h+="list/"+b+"/");var i=this.getParamsDict(c,d,e,f);return a.isEmptyObject(i)||(h+="?"+this.getParams(i)),this._ajaxGet(g,h)},e.ApiDataSource.prototype.search=function(a,b,c,d,e,f){var g="search",h=this.searchUrl(a,b,c,d,e,f);return this._ajaxGet(g,h)},e.ApiDataSource.prototype.searchUrl=function(b,c,d,e,f,g){var h=this.getBaseUrl()+"search",i=a.extend(this.getParamsDict(c,d,e,f),b);return null!=g&&g.length>0&&(i.mimeType=g),h+="?"+this.getParams(i)},e.ApiDataSource.prototype.call=function(b,c,e,f,g,h){var i="call."+c,j=null!=b&&b.length>0?this.getBaseUrl()+b+"/call/"+c:this.getBaseUrl()+"call/"+c,k=a.extend({},this.getParamsDict(f,null,null,null),e),l=j+"?"+this.getParams(k);return h||l.length>=d?this._ajaxPost(i,j,k,g):this._ajaxGet(i,l,g)},e.ApiDataSource.prototype.callMultiple=function(b,c,e,f,g,h){var i="call."+c,j=this.getBaseUrl()+b.join(",")+"/call/"+c,k=a.extend({},this.getParamsDict(f,null,null,null),e),l=j+"?"+this.getParams(k);return h||l.length>=d?this._ajaxPost(i,j,k,g):this._ajaxGet(i,l,g)},e.ApiDataSource.prototype.longCall=function(a,b,c,d,e){return this.call(a,b,c,d,6e4,e)},e.ApiDataSource.prototype.getBaseUrl=function(){var a=null!=this.user.tokenType&&this.user.tokenType.length>0?this.user.tokenType:"null";return this.urlApi+"/"+this.user.userId+"/"+this.user.userToken+"/"+a+"/"+this.collection+"/"},e.ApiDataSource.prototype.getParams=function(b){return a.param(this.ajax._prepareDict(b))},e.ApiDataSource.prototype.getParamsDict=function(b,c,d,e){var f={};return b&&(f._fields=a.isArray(b)?b.join(","):b.replace(/\s/g,"")),c&&(f._limit=c),d&&(f._skip=d),e&&(f._sort=e),this.version&&(f._v=this.version),f},e.ApiDataSource.prototype._ajaxGet=function(a,b,c){return this.ajax.get(b,c,{coll:this.collection,cmd:a})},e.ApiDataSource.prototype._ajaxPost=function(a,b,c,d){return this.ajax.post(b,c,d,{coll:this.collection,cmd:a})},e}(a,d,b),g={amazonBucket:"app"},h=function(){String.prototype.pluralize=function(a,b){return"is"==this&&1!=a?"are":"this"==this?1==a?this:"these":this.endsWith("s")?(b=b||"es",1==a?this:this+b):this.endsWith("y")?(b=b||"ies",1==a?this:this.substr(0,this.length-1)+b):(b=b||"s",1==a?this:this+b)},String.prototype.capitalize=function(a){return(a?this.toLowerCase():this).replace(/(?:^|\s)\S/g,function(a){return a.toUpperCase()})},String.prototype.startsWith||(String.prototype.startsWith=function(a){return 0==this.indexOf(a)}),String.prototype.endsWith||(String.prototype.endsWith=function(a){return this.length<a.length?!1:this.lastIndexOf(a)==this.length-a.length}),String.prototype.truncate||(String.prototype.truncate=function(a){a=null!=a?a:25;var b=this.match(RegExp("^.{0,"+a+"}[S]*")),c=b[0].length;return b=b[0].replace(/\s$/,""),c<this.length&&(b+="&hellip;"),b}),String.prototype.isValidUrl||(String.prototype.isValidUrl=function(){var a=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return a.test(this)?!0:!1}),String.prototype.hashCode||(String.prototype.hashCode=function(){var a,b,c,d=0;if(0==this.length)return d;for(a=0,c=this.length;c>a;a++)b=this.charCodeAt(a),d=(d<<5)-d+b,d|=0;return d});var a={};a.latin_map={"Á":"A","Ă":"A","Ắ":"A","Ặ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ǎ":"A","Â":"A","Ấ":"A","Ậ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ä":"A","Ǟ":"A","Ȧ":"A","Ǡ":"A","Ạ":"A","Ȁ":"A","À":"A","Ả":"A","Ȃ":"A","Ā":"A","Ą":"A","Å":"A","Ǻ":"A","Ḁ":"A","Ⱥ":"A","Ã":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ḃ":"B","Ḅ":"B","Ɓ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ć":"C","Č":"C","Ç":"C","Ḉ":"C","Ĉ":"C","Ċ":"C","Ƈ":"C","Ȼ":"C","Ď":"D","Ḑ":"D","Ḓ":"D","Ḋ":"D","Ḍ":"D","Ɗ":"D","Ḏ":"D","ǲ":"D","ǅ":"D","Đ":"D","Ƌ":"D","Ǳ":"DZ","Ǆ":"DZ","É":"E","Ĕ":"E","Ě":"E","Ȩ":"E","Ḝ":"E","Ê":"E","Ế":"E","Ệ":"E","Ề":"E","Ể":"E","Ễ":"E","Ḙ":"E","Ë":"E","Ė":"E","Ẹ":"E","Ȅ":"E","È":"E","Ẻ":"E","Ȇ":"E","Ē":"E","Ḗ":"E","Ḕ":"E","Ę":"E","Ɇ":"E","Ẽ":"E","Ḛ":"E","Ꝫ":"ET","Ḟ":"F","Ƒ":"F","Ǵ":"G","Ğ":"G","Ǧ":"G","Ģ":"G","Ĝ":"G","Ġ":"G","Ɠ":"G","Ḡ":"G","Ǥ":"G","Ḫ":"H","Ȟ":"H","Ḩ":"H","Ĥ":"H","Ⱨ":"H","Ḧ":"H","Ḣ":"H","Ḥ":"H","Ħ":"H","Í":"I","Ĭ":"I","Ǐ":"I","Î":"I","Ï":"I","Ḯ":"I","İ":"I","Ị":"I","Ȉ":"I","Ì":"I","Ỉ":"I","Ȋ":"I","Ī":"I","Į":"I","Ɨ":"I","Ĩ":"I","Ḭ":"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS","Ĵ":"J","Ɉ":"J","Ḱ":"K","Ǩ":"K","Ķ":"K","Ⱪ":"K","Ꝃ":"K","Ḳ":"K","Ƙ":"K","Ḵ":"K","Ꝁ":"K","Ꝅ":"K","Ĺ":"L","Ƚ":"L","Ľ":"L","Ļ":"L","Ḽ":"L","Ḷ":"L","Ḹ":"L","Ⱡ":"L","Ꝉ":"L","Ḻ":"L","Ŀ":"L","Ɫ":"L","ǈ":"L","Ł":"L","Ǉ":"LJ","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ń":"N","Ň":"N","Ņ":"N","Ṋ":"N","Ṅ":"N","Ṇ":"N","Ǹ":"N","Ɲ":"N","Ṉ":"N","Ƞ":"N","ǋ":"N","Ñ":"N","Ǌ":"NJ","Ó":"O","Ŏ":"O","Ǒ":"O","Ô":"O","Ố":"O","Ộ":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ö":"O","Ȫ":"O","Ȯ":"O","Ȱ":"O","Ọ":"O","Ő":"O","Ȍ":"O","Ò":"O","Ỏ":"O","Ơ":"O","Ớ":"O","Ợ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ȏ":"O","Ꝋ":"O","Ꝍ":"O","Ō":"O","Ṓ":"O","Ṑ":"O","Ɵ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Õ":"O","Ṍ":"O","Ṏ":"O","Ȭ":"O","Ƣ":"OI","Ꝏ":"OO","Ɛ":"E","Ɔ":"O","Ȣ":"OU","Ṕ":"P","Ṗ":"P","Ꝓ":"P","Ƥ":"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q","Ŕ":"R","Ř":"R","Ŗ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ȑ":"R","Ȓ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C","Ǝ":"E","Ś":"S","Ṥ":"S","Š":"S","Ṧ":"S","Ş":"S","Ŝ":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṩ":"S","Ť":"T","Ţ":"T","Ṱ":"T","Ț":"T","Ⱦ":"T","Ṫ":"T","Ṭ":"T","Ƭ":"T","Ṯ":"T","Ʈ":"T","Ŧ":"T","Ɐ":"A","Ꞁ":"L","Ɯ":"M","Ʌ":"V","Ꜩ":"TZ","Ú":"U","Ŭ":"U","Ǔ":"U","Û":"U","Ṷ":"U","Ü":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ǖ":"U","Ṳ":"U","Ụ":"U","Ű":"U","Ȕ":"U","Ù":"U","Ủ":"U","Ư":"U","Ứ":"U","Ự":"U","Ừ":"U","Ử":"U","Ữ":"U","Ȗ":"U","Ū":"U","Ṻ":"U","Ų":"U","Ů":"U","Ũ":"U","Ṹ":"U","Ṵ":"U","Ꝟ":"V","Ṿ":"V","Ʋ":"V","Ṽ":"V","Ꝡ":"VY","Ẃ":"W","Ŵ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẁ":"W","Ⱳ":"W","Ẍ":"X","Ẋ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ẏ":"Y","Ỵ":"Y","Ỳ":"Y","Ƴ":"Y","Ỷ":"Y","Ỿ":"Y","Ȳ":"Y","Ɏ":"Y","Ỹ":"Y","Ź":"Z","Ž":"Z","Ẑ":"Z","Ⱬ":"Z","Ż":"Z","Ẓ":"Z","Ȥ":"Z","Ẕ":"Z","Ƶ":"Z","Ĳ":"IJ","Œ":"OE","ᴀ":"A","ᴁ":"AE","ʙ":"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F","ɢ":"G","ʛ":"G","ʜ":"H","ɪ":"I","ʁ":"R","ᴊ":"J","ᴋ":"K","ʟ":"L","ᴌ":"L","ᴍ":"M","ɴ":"N","ᴏ":"O","ɶ":"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P","ʀ":"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W","ʏ":"Y","ᴢ":"Z","á":"a","ă":"a","ắ":"a","ặ":"a","ằ":"a","ẳ":"a","ẵ":"a","ǎ":"a","â":"a","ấ":"a","ậ":"a","ầ":"a","ẩ":"a","ẫ":"a","ä":"a","ǟ":"a","ȧ":"a","ǡ":"a","ạ":"a","ȁ":"a","à":"a","ả":"a","ȃ":"a","ā":"a","ą":"a","ᶏ":"a","ẚ":"a","å":"a","ǻ":"a","ḁ":"a","ⱥ":"a","ã":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ḃ":"b","ḅ":"b","ɓ":"b","ḇ":"b","ᵬ":"b","ᶀ":"b","ƀ":"b","ƃ":"b","ɵ":"o","ć":"c","č":"c","ç":"c","ḉ":"c","ĉ":"c","ɕ":"c","ċ":"c","ƈ":"c","ȼ":"c","ď":"d","ḑ":"d","ḓ":"d","ȡ":"d","ḋ":"d","ḍ":"d","ɗ":"d","ᶑ":"d","ḏ":"d","ᵭ":"d","ᶁ":"d","đ":"d","ɖ":"d","ƌ":"d","ı":"i","ȷ":"j","ɟ":"j","ʄ":"j","ǳ":"dz","ǆ":"dz","é":"e","ĕ":"e","ě":"e","ȩ":"e","ḝ":"e","ê":"e","ế":"e","ệ":"e","ề":"e","ể":"e","ễ":"e","ḙ":"e","ë":"e","ė":"e","ẹ":"e","ȅ":"e","è":"e","ẻ":"e","ȇ":"e","ē":"e","ḗ":"e","ḕ":"e","ⱸ":"e","ę":"e","ᶒ":"e","ɇ":"e","ẽ":"e","ḛ":"e","ꝫ":"et","ḟ":"f","ƒ":"f","ᵮ":"f","ᶂ":"f","ǵ":"g","ğ":"g","ǧ":"g","ģ":"g","ĝ":"g","ġ":"g","ɠ":"g","ḡ":"g","ᶃ":"g","ǥ":"g","ḫ":"h","ȟ":"h","ḩ":"h","ĥ":"h","ⱨ":"h","ḧ":"h","ḣ":"h","ḥ":"h","ɦ":"h","ẖ":"h","ħ":"h","ƕ":"hv","í":"i","ĭ":"i","ǐ":"i","î":"i","ï":"i","ḯ":"i","ị":"i","ȉ":"i","ì":"i","ỉ":"i","ȋ":"i","ī":"i","į":"i","ᶖ":"i","ɨ":"i","ĩ":"i","ḭ":"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is","ǰ":"j","ĵ":"j","ʝ":"j","ɉ":"j","ḱ":"k","ǩ":"k","ķ":"k","ⱪ":"k","ꝃ":"k","ḳ":"k","ƙ":"k","ḵ":"k","ᶄ":"k","ꝁ":"k","ꝅ":"k","ĺ":"l","ƚ":"l","ɬ":"l","ľ":"l","ļ":"l","ḽ":"l","ȴ":"l","ḷ":"l","ḹ":"l","ⱡ":"l","ꝉ":"l","ḻ":"l","ŀ":"l","ɫ":"l","ᶅ":"l","ɭ":"l","ł":"l","ǉ":"lj","ſ":"s","ẜ":"s","ẛ":"s","ẝ":"s","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ᵯ":"m","ᶆ":"m","ń":"n","ň":"n","ņ":"n","ṋ":"n","ȵ":"n","ṅ":"n","ṇ":"n","ǹ":"n","ɲ":"n","ṉ":"n","ƞ":"n","ᵰ":"n","ᶇ":"n","ɳ":"n","ñ":"n","ǌ":"nj","ó":"o","ŏ":"o","ǒ":"o","ô":"o","ố":"o","ộ":"o","ồ":"o","ổ":"o","ỗ":"o","ö":"o","ȫ":"o","ȯ":"o","ȱ":"o","ọ":"o","ő":"o","ȍ":"o","ò":"o","ỏ":"o","ơ":"o","ớ":"o","ợ":"o","ờ":"o","ở":"o","ỡ":"o","ȏ":"o","ꝋ":"o","ꝍ":"o","ⱺ":"o","ō":"o","ṓ":"o","ṑ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","õ":"o","ṍ":"o","ṏ":"o","ȭ":"o","ƣ":"oi","ꝏ":"oo","ɛ":"e","ᶓ":"e","ɔ":"o","ᶗ":"o","ȣ":"ou","ṕ":"p","ṗ":"p","ꝓ":"p","ƥ":"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q","ʠ":"q","ɋ":"q","ꝗ":"q","ŕ":"r","ř":"r","ŗ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ȑ":"r","ɾ":"r","ᵳ":"r","ȓ":"r","ṟ":"r","ɼ":"r","ᵲ":"r","ᶉ":"r","ɍ":"r","ɽ":"r","ↄ":"c","ꜿ":"c","ɘ":"e","ɿ":"r","ś":"s","ṥ":"s","š":"s","ṧ":"s","ş":"s","ŝ":"s","ș":"s","ṡ":"s","ṣ":"s","ṩ":"s","ʂ":"s","ᵴ":"s","ᶊ":"s","ȿ":"s","ɡ":"g","ᴑ":"o","ᴓ":"o","ᴝ":"u","ť":"t","ţ":"t","ṱ":"t","ț":"t","ȶ":"t","ẗ":"t","ⱦ":"t","ṫ":"t","ṭ":"t","ƭ":"t","ṯ":"t","ᵵ":"t","ƫ":"t","ʈ":"t","ŧ":"t","ᵺ":"th","ɐ":"a","ᴂ":"ae","ǝ":"e","ᵷ":"g","ɥ":"h","ʮ":"h","ʯ":"h","ᴉ":"i","ʞ":"k","ꞁ":"l","ɯ":"m","ɰ":"m","ᴔ":"oe","ɹ":"r","ɻ":"r","ɺ":"r","ⱹ":"r","ʇ":"t","ʌ":"v","ʍ":"w","ʎ":"y","ꜩ":"tz","ú":"u","ŭ":"u","ǔ":"u","û":"u","ṷ":"u","ü":"u","ǘ":"u","ǚ":"u","ǜ":"u","ǖ":"u","ṳ":"u","ụ":"u","ű":"u","ȕ":"u","ù":"u","ủ":"u","ư":"u","ứ":"u","ự":"u","ừ":"u","ử":"u","ữ":"u","ȗ":"u","ū":"u","ṻ":"u","ų":"u","ᶙ":"u","ů":"u","ũ":"u","ṹ":"u","ṵ":"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v","ṿ":"v","ʋ":"v","ᶌ":"v","ⱱ":"v","ṽ":"v","ꝡ":"vy","ẃ":"w","ŵ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẁ":"w","ⱳ":"w","ẘ":"w","ẍ":"x","ẋ":"x","ᶍ":"x","ý":"y","ŷ":"y","ÿ":"y","ẏ":"y","ỵ":"y","ỳ":"y","ƴ":"y","ỷ":"y","ỿ":"y","ȳ":"y","ẙ":"y","ɏ":"y","ỹ":"y","ź":"z","ž":"z","ẑ":"z","ʑ":"z","ⱬ":"z","ż":"z","ẓ":"z","ȥ":"z","ẕ":"z","ᵶ":"z","ᶎ":"z","ʐ":"z","ƶ":"z","ɀ":"z","ﬀ":"ff","ﬃ":"ffi","ﬄ":"ffl","ﬁ":"fi","ﬂ":"fl","ĳ":"ij","œ":"oe","ﬆ":"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x"},String.prototype.latinise=function(){return this.replace(/[^A-Za-z0-9\[\] ]/g,function(b){return a.latin_map[b]||b})},String.prototype.latinize=String.prototype.latinise,String.prototype.isLatin=function(){return this==this.latinise()},String.prototype.OnlyAlphaNumSpaceAndUnderscore=function(){return $.trim(this).toLowerCase().replace(/[\s-]+/g,"_").latinise().replace(/[\W]/g,"")},String.prototype.OnlyAlphaNumSpaceUnderscoreAndDot=function(){return $.trim(this).toLowerCase().replace(/[\s-]+/g,"_").latinise().replace(/[^a-z0-9_\.]/g,"")},String.prototype.NoWhiteSpaceInWord||(String.prototype.NoWhiteSpaceInWord=function(){return this.replace(/[\s]+/g,"")}),String.prototype.addLeadingZero||(String.prototype.addLeadingZero=function(a){var b=this.toString();return b.length<a?("0"+b).addLeadingZero(a):b}),String.prototype.lpad=function(a,b){for(var c=this;c.length<b;)c=a+c;return c},Number.prototype.between||(Number.prototype.between=function(a,b){var c=Math.min(a,b),d=Math.max(a,b);return this>=c&&d>=this}),Array.prototype.joinOther||(Array.prototype.joinOther=function(a,b,c){if(this.length<2)return this.join(b);b=b||", ",c=c||"other",(!a||0>a)&&(a=1);for(var d=this.slice(0),e=d.join(b);d.length>1&&e.length>a;)d.pop(),e=d.join(b);var f=this.length-d.length;return f>0&&(e+=" +"+f+" "+c),e}),Array.prototype.joinAdvanced||(Array.prototype.joinAdvanced=function(a,b){var c=this.slice(0),d="";return 1===c.length?d=c[0]:2===c.length?d=c.join(b):c.length>2&&(d=c.slice(0,-1).join(a)+b+c.slice(-1)),d}),Array.prototype.find||(Array.prototype.find=function(a){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;d>f;f++)if(b=c[f],a.call(e,b,f,c))return b;return void 0}),Object.values||(Object.values=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b})}(),i={isValidEmail:function(a){var b=/^([\w-\+]+(?:\.[\w-\+]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,}(?:\.[a-z]{2})?)$/i;return b.test(a)},isFreeEmail:function(a){var b=/^([\w-\+]+(?:\.[\w-\+]+)*)@(?!gmail\.com)(?!yahoo\.com)(?!hotmail\.com)((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return!b.test(a)},isValidPhone:function(a){var b=/^\d{9,}$/.test(a);if(b)return!0;var c=a.match(/^[\s()+-]*([0-9][\s()+-]*){10,20}(( x| ext)\d{1,5}){0,1}$/);return null!=c&&c.length>0},isValidURL:function(a){var b=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/;return b.test(a)},isValidPassword:function(a){var b=a.match(/[0-9]/);return a.length>=4&&b}},j=function(){var a=localStorage.setItem,b=localStorage.getItem,c=localStorage.removeItem,d={};Storage.prototype.setItem=function(b,c){try{a.apply(this,[b,c])}catch(e){d[b]=String(c)}return!0},Storage.prototype.getItem=function(a){try{return b.apply(this,[a])}catch(c){return d.hasOwnProperty(a)?d[a]:void 0}return null},Storage.prototype.removeItem=function(a){try{c.apply(this,[a])}catch(b){delete d[a]}return!0}}(),k=function(a){var b={};return b.sortFields=function(b,c,d,e){var f=[],g=null,h=null;c=c.slice(),null!=d&&(c=c.filter(function(a){return a.form==d}));for(var i=0;i<c.length&&(g=c[i],h=b[g.name],f.push(a.extend({value:h},g)),!(null!=e&&f.length>=e));i++);return f},b.stringifyOrdered=function(a){if(keys=[],a)for(var b in a)keys.push(b);keys.sort();var b,c={};for(var d in keys)b=keys[d],c[b]=a[b];return JSON.stringify(c)},b.areEqual=function(a,c){return b.stringifyOrdered(a||{})==b.stringifyOrdered(c||{})},b.badgeify=function(a){return a>100?"99+":a>10?"10+":a>0?""+a:""},b.getLoginName=function(a,b){var c=/[\s-]*/gim;return a.latinise().toLowerCase().replace(c,"")+"."+b.latinise().toLowerCase().replace(c,"")},b.getUrlParam=function(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+a+"=([^&#]*)",d=new RegExp(c),e=d.exec(window.location.href);return e?decodeURIComponent(e[1].replace(/\+/g," ")):b},a.urlParam=b.getUrlParam,b.getParsedLines=function(b){if(b&&b.length>0){var c=b.split(/\s*([,;\r\n]+|\s\s)\s*/);return c.filter(function(b,c,d){return b.length>0&&b.indexOf(",")<0&&b.indexOf(";")<0&&a.trim(b).length>0&&d.indexOf(b)>=c})}return[]},b}(a),l=function(a,b,c,d,e,f,g,h){var i="1215_cr_90",j="yearly",k="attempt",l="trial",m=function(d,e){d=d||{},this.ds=d.ds||new c.ApiAnonymous({urlApi:e.urlApi,ajax:new c.ApiAjax({useJsonp:e.useJsonp})}),this.firstName=d.firstName||"",this.lastName=d.lastName||"",this.company=d.company||"",this.timezone=d.timezone||b.determine().name(),this.email=d.email||"",this.login=d.login||"",this.password=d.password||"",this.plan=d.plan||i,this.period=d.period||j,this.source=d.source||"",this.phone=d.phone||"",this.industry=d.industry||"",this.inviteToken=d.inviteToken||"",this.selfserviceToken=d.selfserviceToken||"",this.onBeforeCreateAccount=d.onBeforeCreateAccount||function(){return a.Deferred().resolve()},this.onCreatedAccount=d.onCreatedAccount||function(){return a.Deferred().resolve()},this.onBeforeActivateAccount=d.onBeforeActivateAccount||function(){return a.Deferred().resolve()},this.onActivatedAccount=d.onActivatedAccount||function(){return a.Deferred().resolve()},this.onBeforeActivateInvite=d.onBeforeActivateInvite||function(){return a.Deferred().resolve()},this.onActivatedInvite=d.onActivatedInvite||function(){return a.Deferred().resolve()},this.onBeforeActivateSelfService=d.onBeforeActivateSelfService||function(){return a.Deferred().resolve()},this.onActivatedSelfService=d.onActivatedSelfService||function(){return a.Deferred().resolve()}};return m.prototype.validContactInfo=function(){return this.firstNameIsValid()&&this.lastNameIsValid()&&this.companyIsValid()&&this.emailIsValid()},m.prototype.validCredentials=function(){return this.loginIsValid()&&this.passwordIsValid()},m.prototype.firstNameIsValid=function(){var b=a.trim(this.firstName);return b.length>=2&&b.length<=25},m.prototype.lastNameIsValid=function(){var b=a.trim(this.lastName);return b.length>=2&&b.length<=25},m.prototype.companyIsValid=function(){var b=a.trim(this.company);return b.length>=3&&b.length<=50},m.prototype.companyExists=function(){var a=this.getGroupId();return this.ds.call("accountExists",{account:a}).then(function(a){return a.result})},m.prototype.emailIsValid=function(b){var c=a.trim(this.email),d=f.isValidEmail(c);return d&&1==b?!f.isFreeEmail(c):d},m.prototype.emailExists=function(){return this.emailIsValid()?this.ds.call("emailExists",{email:this.email}).then(function(a){return a.result}):a.Deferred().resolve(!1)},m.prototype.loginIsValid=function(){var a=this.login.NoWhiteSpaceInWord().OnlyAlphaNumSpaceUnderscoreAndDot();return a.length>=4&&a==this.login},m.prototype.loginExists=function(){return this.loginIsValid()?this.ds.call("loginExists",{login:this.login}).then(function(a){return a.result}):a.Deferred().resolve(!0)},m.prototype.passwordIsValid=function(){return f.isValidPassword(a.trim(this.password))},m.prototype.phoneIsValid=function(){return f.isValidPhone(a.trim(this.phone))},m.prototype.inviteIsValid=function(){return""!=a.trim(this.inviteToken)?this.ds.call("checkInvite",{code:this.inviteToken}).then(function(a){return a.result}):a.Deferred().resolve(!1)},m.prototype.getGroupId=function(){var b=a.trim(this.company);return b.replace(/[\.-\s]/g,"_").OnlyAlphaNumSpaceAndUnderscore()},m.prototype.getFullName=function(){var b=a.trim(this.firstName),c=a.trim(this.lastName);return a.trim(b+" "+c)},m.prototype.setFullName=function(b){var c=m.splitFirstLastName(a.trim(b));this.firstName=c.firstName,this.lastName=c.lastName},m.prototype.createAccount=function(){var b=this,c=this.onBeforeCreateAccount,d=this.onCreatedAccount;return c().then(function(){return b.ds.longCall("createAccount",{kind:l,period:a.trim(b.period),plan:a.trim(b.plan),company:a.trim(b.company),groupId:b.getGroupId()}).then(function(a){return d(a)})})},m.prototype.activateAccount=function(b){var d=this,e=this.onBeforeActivateAccount,f=this.onActivatedAccount;return e().then(function(){return d.ds.longCall("activateAccount",{groupId:d.getGroupId(),name:d.getFullName(),login:a.trim(d.login),email:a.trim(d.email),password:a.trim(d.password),timezone:a.trim(d.timezone),load_sample:!1,owner_customer:!0,maintenance_customer:!0}).then(function(a){if(b){var e=new c.ApiUser({userId:d.login,userToken:a.data.token});e.toStorage()}return f(a)})})},m.prototype.activateInvite=function(b){var d=this,e=this.onBeforeActivateInvite,f=this.onActivatedInvite;return e().then(function(){return d.ds.longCall("activateInvite",{name:d.getFullName(),code:d.inviteToken,login:a.trim(d.login),password:a.trim(d.password),timezone:a.trim(d.timezone)}).then(function(a){if(b){var e=new c.ApiUser({userId:d.login,userToken:a.data.token});e.toStorage()}return f(a)})})},m.prototype.activateSelfService=function(b){var d=this,e=this.onBeforeActivateSelfService,f=this.onActivatedSelfService;return e().then(function(){return d.ds.longCall("createSelfServiceUser",{name:d.getFullName(),login:a.trim(d.login),password:a.trim(d.password),timezone:a.trim(d.timezone),email:a.trim(d.email),phone:a.trim(d.phone),key:d.selfserviceToken}).then(function(a){if(b){var e=new c.ApiUser({userId:d.login,userToken:a.data.token});e.toStorage()}return f(a)})})},m.prototype.storeLead=function(b){return this.ds.call("storeLead",{firstName:a.trim(this.firstName),lastName:a.trim(this.lastName),email:a.trim(this.email),company:a.trim(this.company),tags:b||[]})},m.splitFirstLastName=function(b){var c=b.split(" ");return{firstName:a.trim(c.shift()),lastName:a.trim(c.join(" "))}},m.fromQueryString=function(c,d){var e=h.getUrlParam("name","").capitalize(),f=h.getUrlParam("email",""),g=h.getUrlParam("company",""),l=h.getUrlParam("firstName","").capitalize(),n=h.getUrlParam("lastName","").capitalize(),o=h.getUrlParam("login","").toLowerCase(),p=h.getUrlParam("source",k),q=h.getUrlParam("period",j),r=h.getUrlParam("plan",i),s=h.getUrlParam("timezone",b.determine().name()),t=h.getUrlParam("code",""),u=h.getUrlParam("key","");if(0==l.length&&0==n.length&&e.length>0){var v=m.splitFirstLastName(e);l=v.firstName,n=v.lastName}return 0==o.length&&l.length>0&&n.length>0&&(o=h.getLoginName(l,n)),-1!=["starter","basic","professional","enterprise"].indexOf(r)&&(r=i),new m(a.extend({name:e,email:f,company:g,timezone:s,firstName:l,lastName:n,login:o,source:p,plan:r,period:q,inviteToken:t,selfserviceToken:u},c),d)},m}(a,c,f,g,h,i,j,k)});