/*! core 2017-01-23 */
!function(a){"function"==typeof define&&define.amd?define(["jquery","moment","jstz","jquery-jsonp","jquery-pubsub"],a):a($,moment,jstz,jsonp,pubsub)}(function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;return f={amazonBucket:"app"},g={isCodeValid:function(a){return null!=a.trim().match(/^[a-z0-9]{8}$/i)},isCodeFromScanner:function(a){if(!a||0==a.length)return!1;var b=a.substring(0,23),c="http://cheqroom.com/qr/".indexOf(b);return 0==c},isValidBarcode:function(a){return a&&null!=a.match(/^[A-Z0-9]{4,13}$/i)},isValidQRCode:function(a){return this.isValidItemQRCode(a)||this.isValidTransferQRCode(a)},isValidTransferQRCode:function(a){return null!=a.match(/^http:\/\/cheqroom\.com\/ordertransfer\/[a-zA-Z0-9]{22}$/i)},isValidDocQRCode:function(a){return a&&null!=a.match(/^http:\/\/cheqroom\.com\/qr\/[a-z0-9]{8}$/i)},isValidItemQRCode:function(a){return this.isValidDocQRCode(a)},isValidKitQRCode:function(a){return this.isValidDocQRCode(a)},getCheqRoomRedirectUrl:function(a){return this.isCodeValid(a)?"http://cheqroom.com/qr/"+a.trim():""},getCheqRoomRedirectUrlQR:function(a,b){if(this.isCodeValid(a)){var c=encodeURI(this.getCheqRoomRedirectUrl(a));return"https://chart.googleapis.com/chart?chs="+b+"x"+b+"&cht=qr&choe=UTF-8&chld=L|0&chl="+c}return""},getQRCodeUrl:function(a,b,c){return a+"/qrcode?code="+b+"&size="+c},getBarcodeUrl:function(a,b,c,d){return a+"/barcode?code="+b+"&width="+c+(d?"&height="+d:"")}},h=function(a){return{getFriendlyOrderStatus:function(a){switch(a){case"creating":return"Incomplete";case"open":return"Open";case"closed":return"Closed";default:return"Unknown"}},getFriendlyOrderCss:function(a){switch(a){case"creating":return"label-creating";case"open":return"label-open";case"closed":return"label-closed";default:return""}},getFriendlyOrderSize:function(a){if(a.items&&a.items.length>0){var b=a.items.length+" item";return a.items.length>1&&(b+="s"),b}return"No items"},isOrderOverdue:function(b,c){return c=c||a(),"open"==b.status&&c.isAfter(b.due)},isOrderArchived:function(a){return a&&null!=a.archived},getOrderStatus:function(b,c){return c=c||a(),this.isOrderOverdue(b,c)?"Overdue":this.isOrderArchived(b)?"Archived":this.getFriendlyOrderStatus(b.status)},getOrderCss:function(b,c){return c=c||a(),this.isOrderOverdue(b,c)?"label-overdue":this.isOrderArchived(b)?this.getFriendlyOrderCss(b.status)+" label-striped":this.getFriendlyOrderCss(b.status)}}}(b),i={getFriendlyReservationCss:function(a){switch(a){case"creating":return"label-creating";case"open":return"label-open";case"closed":return"label-closed";case"cancelled":return"label-cancelled";default:return""}},getFriendlyReservationStatus:function(a){switch(a){case"creating":return"Incomplete";case"open":return"Open";case"closed":return"Closed";case"cancelled":return"Cancelled";default:return"Unknown"}},isReservationArchived:function(a){return a&&null!=a.archived},getReservationCss:function(a){return this.isOrderArchived(a)?this.getFriendlyReservationCss(a.status)+" label-striped":this.getFriendlyReservationCss(a.status)}},j={getFriendlyItemStatus:function(a){switch(a){case"available":return"Available";case"checkedout":return"Checked out";case"await_checkout":return"Checking out";case"in_transit":return"In transit";case"in_custody":return"In custody";case"maintenance":return"Maintenance";case"repair":return"Repair";case"inspection":return"Inspection";case"expired":return"Expired";default:return"Unknown"}},getItemStatusCss:function(a){switch(a){case"available":return"label-available";case"checkedout":return"label-checkedout";case"await_checkout":return"label-awaitcheckout";case"in_transit":return"label-transit";case"in_custody":return"label-custody";case"maintenance":return"label-maintenance";case"repair":return"label-repair";case"inspection":return"label-inspection";case"expired":return"label-expired";default:return""}},getItemStatusIcon:function(a){switch(a){case"available":return"fa fa-check-circle";case"checkedout":return"fa fa-times-circle";case"await_checkout":return"fa fa-ellipsis-h";case"in_transit":return"fa fa-truck";case"in_custody":return"fa fa-exchange";case"maintenance":return"fa fa-wrench";case"repair":return"fa fa-wrench";case"inspection":return"fa fa-stethoscope";case"expired":return"fa fa-bug";default:return""}},getItemsByStatus:function(a,b){return a?a.filter(function(a){return"string"==typeof b?a.status==b:b(a)}):[]},getAvailableItems:function(a){return this.getItemsByStatus(a,"available")},getActiveItems:function(a){return this.getItemsByStatus(a,function(a){return"expired"!=a.status&&"in_custody"!=a.status})},getItemIds:function(a){return a.map(function(a){return"string"==typeof a?a:a._id})}},k={getFriendlyConflictKind:function(a){switch(a){case"location":return"At wrong location";case"order":return"Checked out";case"reservation":return"Already reserved";case"expired":return"Item is expired";case"custody":return"Item is in custody";default:return""}}},l=function(){var a=function(a){return"string"==typeof a?a:a.name};return{getCategoryKeyFromName:function(a){return"cheqroom.types.item."+a.split(" ").join("_").split(".").join("").toLowerCase()},getCategoryNameFromKey:function(a){var b=new RegExp("_","g");return a.split(".").pop().replace(b," ")},getCategorySummary:function(b){if(b=b||[],0==b.length)return"No items";for(var c=null,d=null,e=null,f={},g="",h=0,i=0,j=b.length;j>i;i++)c=b[i],e=c.category?a(c.category):"",d=e?this.getCategoryNameFromKey(e):"",f[d]?f[d]+=1:f[d]=1,f[d]>h&&(g=d,h=f[d]);var k=f[g]+" ";if(k+=1==h&&String.prototype.singularize?g.singularize():g,b.length>f[g]){var l=b.length-f[g];k+=" +"+l+" other"}return k},getItemSummary:function(a){if(a=a||[],0==a.length)return"No items";for(var b=", ",c=null,d=0,e={},f=[],g=0,h=a.length;h>g;g++)c=a[g],c.kit&&c.kit.name?e[c.kit.name]?e[c.kit.name].push(c):(e[c.kit.name]=[c],d+=1):f.push(c);if(0==d)return this.getCategorySummary(a);var i=$.map(e,function(a,b){return b});if(0==f.length){var j=30;return i.joinOther(j,b,"other kits")}return 1==d?i[0]+b+this.getCategorySummary(f):h(i)+" kits"+b+this.getCategorySummary(f)}}}(),m=function(a){return{getAvatarInitial:function(b,c){var d={XS:32,S:64,M:128,L:256,XL:512},e=["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7"],f=b.split(" "),g=2==f.length?f[0].charAt(0).toUpperCase()+f[1].charAt(0).toUpperCase():f[0].charAt(0).toUpperCase(),h=g.charCodeAt(0)-65,i=h%e.length,j=d[c],k=d[c],l=j,m=k,n=a("<canvas />").attr({width:j,height:k}),o=n.get(0).getContext("2d");return window.devicePixelRatio&&(n.attr("width",j*window.devicePixelRatio),n.attr("height",k*window.devicePixelRatio),n.css("width",l),n.css("height",m),o.scale(window.devicePixelRatio,window.devicePixelRatio)),o.fillStyle=e[i],o.fillRect(0,0,j,k),o.font=j/2+"px Arial",o.textAlign="center",o.fillStyle="#FFF",o.fillText(g,l/2,m/1.5),n.get(0).toDataURL()},getMaintenanceAvatar:function(b){var c={XS:32,S:64,M:128,L:256,XL:512},d=c[b],e=c[b],f=d,g=e,h=a("<canvas />").attr({width:d,height:e}),i=h.get(0).getContext("2d");return window.devicePixelRatio&&(h.attr("width",d*window.devicePixelRatio),h.attr("height",e*window.devicePixelRatio),h.css("width",f),h.css("height",g),i.scale(window.devicePixelRatio,window.devicePixelRatio)),i.fillStyle="#f5f5f5",i.fillRect(0,0,d,e),i.font=d/2+"px FontAwesome",i.textAlign="center",i.fillStyle="#aaa",i.fillText(String.fromCharCode("0xf0ad"),f/2,g/1.5),h.get(0).toDataURL()},getTextImage:function(b,c,d,e){var f={XS:32,S:64,M:128,L:256,XL:512};d||(d="#aaa"),e||(e="#e5e5e5");var g=f[c],h=f[c],i=g,j=h,k=a("<canvas />").attr({width:g,height:h}),l=k.get(0).getContext("2d");return window.devicePixelRatio&&(k.attr("width",g*window.devicePixelRatio),k.attr("height",h*window.devicePixelRatio),k.css("width",i),k.css("height",j),l.scale(window.devicePixelRatio,window.devicePixelRatio)),l.fillStyle=e,l.fillRect(0,0,g,h),l.font=g/2.7+"px Arial",l.textAlign="center",l.fillStyle=d,l.fillText(b,i/2,j/1.5),k.get(0).toDataURL()},getImageUrl:function(a,b,c,d){var e=a.getBaseUrl()+b+"?mimeType=image/jpeg";return c&&(e+="&size="+c),d&&(e+="&_bust="+(new Date).getTime()),e},getImageCDNUrl:function(a,b,c,d){var e="https://cheqroom-cdn.s3.amazonaws.com/"+a.amazonBucket+"/groups/"+b+"/"+c;if(d&&d.length>0){{var f=e.split(".");f.pop()}e=f.join(".")+"-"+d+".jpg"}return e}}}(a),n=function(a){return{getImgFileNameFromName:function(b){return null!=b&&b.length>0?b.split(" ").join("_").split(".").join("_")+".jpg":"upload "+a().format("YYYY-MM-DD at hh:mm:ss a")+".jpg"},makeFileNameJpg:function(a){return a.indexOf(".")>=0?a.substr(0,a.lastIndexOf("."))+".jpg":a},getFileNameFromUrl:function(a){if(a){var b=a.toString().match(/.*\/(.+?)\./);if(b&&b.length>1)return b[1]}return""}}}(b),o=function(){String.prototype.pluralize=function(a,b){return"is"==this&&1!=a?"are":"this"==this?1==a?this:"these":this.endsWith("s")?(b=b||"es",1==a?this:this+b):this.endsWith("y")?(b=b||"ies",1==a?this:this.substr(0,this.length-1)+b):(b=b||"s",1==a?this:this+b)},String.prototype.capitalize=function(a){return(a?this.toLowerCase():this).replace(/(?:^|\s)\S/g,function(a){return a.toUpperCase()})},String.prototype.startsWith||(String.prototype.startsWith=function(a){return 0==this.indexOf(a)}),String.prototype.endsWith||(String.prototype.endsWith=function(a){return this.length<a.length?!1:this.lastIndexOf(a)==this.length-a.length}),String.prototype.truncate||(String.prototype.truncate=function(a){a=null!=a?a:25;var b=this.match(RegExp("^.{0,"+a+"}[S]*")),c=b[0].length;return b=b[0].replace(/\s$/,""),c<this.length&&(b+="&hellip;"),b}),String.prototype.isValidUrl||(String.prototype.isValidUrl=function(){var a=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return a.test(this)?!0:!1}),String.prototype.hashCode||(String.prototype.hashCode=function(){var a,b,c,d=0;if(0==this.length)return d;for(a=0,c=this.length;c>a;a++)b=this.charCodeAt(a),d=(d<<5)-d+b,d|=0;return d});var a={};a.latin_map={"Á":"A","Ă":"A","Ắ":"A","Ặ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ǎ":"A","Â":"A","Ấ":"A","Ậ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ä":"A","Ǟ":"A","Ȧ":"A","Ǡ":"A","Ạ":"A","Ȁ":"A","À":"A","Ả":"A","Ȃ":"A","Ā":"A","Ą":"A","Å":"A","Ǻ":"A","Ḁ":"A","Ⱥ":"A","Ã":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ḃ":"B","Ḅ":"B","Ɓ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ć":"C","Č":"C","Ç":"C","Ḉ":"C","Ĉ":"C","Ċ":"C","Ƈ":"C","Ȼ":"C","Ď":"D","Ḑ":"D","Ḓ":"D","Ḋ":"D","Ḍ":"D","Ɗ":"D","Ḏ":"D","ǲ":"D","ǅ":"D","Đ":"D","Ƌ":"D","Ǳ":"DZ","Ǆ":"DZ","É":"E","Ĕ":"E","Ě":"E","Ȩ":"E","Ḝ":"E","Ê":"E","Ế":"E","Ệ":"E","Ề":"E","Ể":"E","Ễ":"E","Ḙ":"E","Ë":"E","Ė":"E","Ẹ":"E","Ȅ":"E","È":"E","Ẻ":"E","Ȇ":"E","Ē":"E","Ḗ":"E","Ḕ":"E","Ę":"E","Ɇ":"E","Ẽ":"E","Ḛ":"E","Ꝫ":"ET","Ḟ":"F","Ƒ":"F","Ǵ":"G","Ğ":"G","Ǧ":"G","Ģ":"G","Ĝ":"G","Ġ":"G","Ɠ":"G","Ḡ":"G","Ǥ":"G","Ḫ":"H","Ȟ":"H","Ḩ":"H","Ĥ":"H","Ⱨ":"H","Ḧ":"H","Ḣ":"H","Ḥ":"H","Ħ":"H","Í":"I","Ĭ":"I","Ǐ":"I","Î":"I","Ï":"I","Ḯ":"I","İ":"I","Ị":"I","Ȉ":"I","Ì":"I","Ỉ":"I","Ȋ":"I","Ī":"I","Į":"I","Ɨ":"I","Ĩ":"I","Ḭ":"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS","Ĵ":"J","Ɉ":"J","Ḱ":"K","Ǩ":"K","Ķ":"K","Ⱪ":"K","Ꝃ":"K","Ḳ":"K","Ƙ":"K","Ḵ":"K","Ꝁ":"K","Ꝅ":"K","Ĺ":"L","Ƚ":"L","Ľ":"L","Ļ":"L","Ḽ":"L","Ḷ":"L","Ḹ":"L","Ⱡ":"L","Ꝉ":"L","Ḻ":"L","Ŀ":"L","Ɫ":"L","ǈ":"L","Ł":"L","Ǉ":"LJ","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ń":"N","Ň":"N","Ņ":"N","Ṋ":"N","Ṅ":"N","Ṇ":"N","Ǹ":"N","Ɲ":"N","Ṉ":"N","Ƞ":"N","ǋ":"N","Ñ":"N","Ǌ":"NJ","Ó":"O","Ŏ":"O","Ǒ":"O","Ô":"O","Ố":"O","Ộ":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ö":"O","Ȫ":"O","Ȯ":"O","Ȱ":"O","Ọ":"O","Ő":"O","Ȍ":"O","Ò":"O","Ỏ":"O","Ơ":"O","Ớ":"O","Ợ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ȏ":"O","Ꝋ":"O","Ꝍ":"O","Ō":"O","Ṓ":"O","Ṑ":"O","Ɵ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Õ":"O","Ṍ":"O","Ṏ":"O","Ȭ":"O","Ƣ":"OI","Ꝏ":"OO","Ɛ":"E","Ɔ":"O","Ȣ":"OU","Ṕ":"P","Ṗ":"P","Ꝓ":"P","Ƥ":"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q","Ŕ":"R","Ř":"R","Ŗ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ȑ":"R","Ȓ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C","Ǝ":"E","Ś":"S","Ṥ":"S","Š":"S","Ṧ":"S","Ş":"S","Ŝ":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṩ":"S","Ť":"T","Ţ":"T","Ṱ":"T","Ț":"T","Ⱦ":"T","Ṫ":"T","Ṭ":"T","Ƭ":"T","Ṯ":"T","Ʈ":"T","Ŧ":"T","Ɐ":"A","Ꞁ":"L","Ɯ":"M","Ʌ":"V","Ꜩ":"TZ","Ú":"U","Ŭ":"U","Ǔ":"U","Û":"U","Ṷ":"U","Ü":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ǖ":"U","Ṳ":"U","Ụ":"U","Ű":"U","Ȕ":"U","Ù":"U","Ủ":"U","Ư":"U","Ứ":"U","Ự":"U","Ừ":"U","Ử":"U","Ữ":"U","Ȗ":"U","Ū":"U","Ṻ":"U","Ų":"U","Ů":"U","Ũ":"U","Ṹ":"U","Ṵ":"U","Ꝟ":"V","Ṿ":"V","Ʋ":"V","Ṽ":"V","Ꝡ":"VY","Ẃ":"W","Ŵ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẁ":"W","Ⱳ":"W","Ẍ":"X","Ẋ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ẏ":"Y","Ỵ":"Y","Ỳ":"Y","Ƴ":"Y","Ỷ":"Y","Ỿ":"Y","Ȳ":"Y","Ɏ":"Y","Ỹ":"Y","Ź":"Z","Ž":"Z","Ẑ":"Z","Ⱬ":"Z","Ż":"Z","Ẓ":"Z","Ȥ":"Z","Ẕ":"Z","Ƶ":"Z","Ĳ":"IJ","Œ":"OE","ᴀ":"A","ᴁ":"AE","ʙ":"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F","ɢ":"G","ʛ":"G","ʜ":"H","ɪ":"I","ʁ":"R","ᴊ":"J","ᴋ":"K","ʟ":"L","ᴌ":"L","ᴍ":"M","ɴ":"N","ᴏ":"O","ɶ":"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P","ʀ":"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W","ʏ":"Y","ᴢ":"Z","á":"a","ă":"a","ắ":"a","ặ":"a","ằ":"a","ẳ":"a","ẵ":"a","ǎ":"a","â":"a","ấ":"a","ậ":"a","ầ":"a","ẩ":"a","ẫ":"a","ä":"a","ǟ":"a","ȧ":"a","ǡ":"a","ạ":"a","ȁ":"a","à":"a","ả":"a","ȃ":"a","ā":"a","ą":"a","ᶏ":"a","ẚ":"a","å":"a","ǻ":"a","ḁ":"a","ⱥ":"a","ã":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ḃ":"b","ḅ":"b","ɓ":"b","ḇ":"b","ᵬ":"b","ᶀ":"b","ƀ":"b","ƃ":"b","ɵ":"o","ć":"c","č":"c","ç":"c","ḉ":"c","ĉ":"c","ɕ":"c","ċ":"c","ƈ":"c","ȼ":"c","ď":"d","ḑ":"d","ḓ":"d","ȡ":"d","ḋ":"d","ḍ":"d","ɗ":"d","ᶑ":"d","ḏ":"d","ᵭ":"d","ᶁ":"d","đ":"d","ɖ":"d","ƌ":"d","ı":"i","ȷ":"j","ɟ":"j","ʄ":"j","ǳ":"dz","ǆ":"dz","é":"e","ĕ":"e","ě":"e","ȩ":"e","ḝ":"e","ê":"e","ế":"e","ệ":"e","ề":"e","ể":"e","ễ":"e","ḙ":"e","ë":"e","ė":"e","ẹ":"e","ȅ":"e","è":"e","ẻ":"e","ȇ":"e","ē":"e","ḗ":"e","ḕ":"e","ⱸ":"e","ę":"e","ᶒ":"e","ɇ":"e","ẽ":"e","ḛ":"e","ꝫ":"et","ḟ":"f","ƒ":"f","ᵮ":"f","ᶂ":"f","ǵ":"g","ğ":"g","ǧ":"g","ģ":"g","ĝ":"g","ġ":"g","ɠ":"g","ḡ":"g","ᶃ":"g","ǥ":"g","ḫ":"h","ȟ":"h","ḩ":"h","ĥ":"h","ⱨ":"h","ḧ":"h","ḣ":"h","ḥ":"h","ɦ":"h","ẖ":"h","ħ":"h","ƕ":"hv","í":"i","ĭ":"i","ǐ":"i","î":"i","ï":"i","ḯ":"i","ị":"i","ȉ":"i","ì":"i","ỉ":"i","ȋ":"i","ī":"i","į":"i","ᶖ":"i","ɨ":"i","ĩ":"i","ḭ":"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is","ǰ":"j","ĵ":"j","ʝ":"j","ɉ":"j","ḱ":"k","ǩ":"k","ķ":"k","ⱪ":"k","ꝃ":"k","ḳ":"k","ƙ":"k","ḵ":"k","ᶄ":"k","ꝁ":"k","ꝅ":"k","ĺ":"l","ƚ":"l","ɬ":"l","ľ":"l","ļ":"l","ḽ":"l","ȴ":"l","ḷ":"l","ḹ":"l","ⱡ":"l","ꝉ":"l","ḻ":"l","ŀ":"l","ɫ":"l","ᶅ":"l","ɭ":"l","ł":"l","ǉ":"lj","ſ":"s","ẜ":"s","ẛ":"s","ẝ":"s","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ᵯ":"m","ᶆ":"m","ń":"n","ň":"n","ņ":"n","ṋ":"n","ȵ":"n","ṅ":"n","ṇ":"n","ǹ":"n","ɲ":"n","ṉ":"n","ƞ":"n","ᵰ":"n","ᶇ":"n","ɳ":"n","ñ":"n","ǌ":"nj","ó":"o","ŏ":"o","ǒ":"o","ô":"o","ố":"o","ộ":"o","ồ":"o","ổ":"o","ỗ":"o","ö":"o","ȫ":"o","ȯ":"o","ȱ":"o","ọ":"o","ő":"o","ȍ":"o","ò":"o","ỏ":"o","ơ":"o","ớ":"o","ợ":"o","ờ":"o","ở":"o","ỡ":"o","ȏ":"o","ꝋ":"o","ꝍ":"o","ⱺ":"o","ō":"o","ṓ":"o","ṑ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","õ":"o","ṍ":"o","ṏ":"o","ȭ":"o","ƣ":"oi","ꝏ":"oo","ɛ":"e","ᶓ":"e","ɔ":"o","ᶗ":"o","ȣ":"ou","ṕ":"p","ṗ":"p","ꝓ":"p","ƥ":"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q","ʠ":"q","ɋ":"q","ꝗ":"q","ŕ":"r","ř":"r","ŗ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ȑ":"r","ɾ":"r","ᵳ":"r","ȓ":"r","ṟ":"r","ɼ":"r","ᵲ":"r","ᶉ":"r","ɍ":"r","ɽ":"r","ↄ":"c","ꜿ":"c","ɘ":"e","ɿ":"r","ś":"s","ṥ":"s","š":"s","ṧ":"s","ş":"s","ŝ":"s","ș":"s","ṡ":"s","ṣ":"s","ṩ":"s","ʂ":"s","ᵴ":"s","ᶊ":"s","ȿ":"s","ɡ":"g","ᴑ":"o","ᴓ":"o","ᴝ":"u","ť":"t","ţ":"t","ṱ":"t","ț":"t","ȶ":"t","ẗ":"t","ⱦ":"t","ṫ":"t","ṭ":"t","ƭ":"t","ṯ":"t","ᵵ":"t","ƫ":"t","ʈ":"t","ŧ":"t","ᵺ":"th","ɐ":"a","ᴂ":"ae","ǝ":"e","ᵷ":"g","ɥ":"h","ʮ":"h","ʯ":"h","ᴉ":"i","ʞ":"k","ꞁ":"l","ɯ":"m","ɰ":"m","ᴔ":"oe","ɹ":"r","ɻ":"r","ɺ":"r","ⱹ":"r","ʇ":"t","ʌ":"v","ʍ":"w","ʎ":"y","ꜩ":"tz","ú":"u","ŭ":"u","ǔ":"u","û":"u","ṷ":"u","ü":"u","ǘ":"u","ǚ":"u","ǜ":"u","ǖ":"u","ṳ":"u","ụ":"u","ű":"u","ȕ":"u","ù":"u","ủ":"u","ư":"u","ứ":"u","ự":"u","ừ":"u","ử":"u","ữ":"u","ȗ":"u","ū":"u","ṻ":"u","ų":"u","ᶙ":"u","ů":"u","ũ":"u","ṹ":"u","ṵ":"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v","ṿ":"v","ʋ":"v","ᶌ":"v","ⱱ":"v","ṽ":"v","ꝡ":"vy","ẃ":"w","ŵ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẁ":"w","ⱳ":"w","ẘ":"w","ẍ":"x","ẋ":"x","ᶍ":"x","ý":"y","ŷ":"y","ÿ":"y","ẏ":"y","ỵ":"y","ỳ":"y","ƴ":"y","ỷ":"y","ỿ":"y","ȳ":"y","ẙ":"y","ɏ":"y","ỹ":"y","ź":"z","ž":"z","ẑ":"z","ʑ":"z","ⱬ":"z","ż":"z","ẓ":"z","ȥ":"z","ẕ":"z","ᵶ":"z","ᶎ":"z","ʐ":"z","ƶ":"z","ɀ":"z","ﬀ":"ff","ﬃ":"ffi","ﬄ":"ffl","ﬁ":"fi","ﬂ":"fl","ĳ":"ij","œ":"oe","ﬆ":"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x"},String.prototype.latinise=function(){return this.replace(/[^A-Za-z0-9\[\] ]/g,function(b){return a.latin_map[b]||b})},String.prototype.latinize=String.prototype.latinise,String.prototype.isLatin=function(){return this==this.latinise()},String.prototype.OnlyAlphaNumSpaceAndUnderscore=function(){return $.trim(this).toLowerCase().replace(/[\s-]+/g,"_").latinise().replace(/[\W]/g,"")},String.prototype.OnlyAlphaNumSpaceUnderscoreAndDot=function(){return $.trim(this).toLowerCase().replace(/[\s-]+/g,"_").latinise().replace(/[^a-z0-9_\.]/g,"")},String.prototype.NoWhiteSpaceInWord||(String.prototype.NoWhiteSpaceInWord=function(){return this.replace(/[\s]+/g,"")}),String.prototype.addLeadingZero||(String.prototype.addLeadingZero=function(a){var b=this.toString();return b.length<a?("0"+b).addLeadingZero(a):b}),String.prototype.lpad=function(a,b){for(var c=this;c.length<b;)c=a+c;return c},Number.prototype.between||(Number.prototype.between=function(a,b){var c=Math.min(a,b),d=Math.max(a,b);return this>=c&&d>=this}),Array.prototype.joinOther||(Array.prototype.joinOther=function(a,b,c){if(this.length<2)return this.join(b);b=b||", ",c=c||"other",(!a||0>a)&&(a=1);for(var d=this.slice(0),e=d.join(b);d.length>1&&e.length>a;)d.pop(),e=d.join(b);var f=this.length-d.length;return f>0&&(e+=" +"+f+" "+c),e}),Array.prototype.joinAdvanced||(Array.prototype.joinAdvanced=function(a,b){var c=this.slice(0),d="";return 1===c.length?d=c[0]:2===c.length?d=c.join(b):c.length>2&&(d=c.slice(0,-1).join(a)+b+c.slice(-1)),d}),Array.prototype.find||(Array.prototype.find=function(a){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;d>f;f++)if(b=c[f],a.call(e,b,f,c))return b;return void 0})}(),p={isValidEmail:function(a){var b=/^([\w-\+]+(?:\.[\w-\+]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return b.test(a)},isValidPhone:function(a){var b=/^\d{9,}$/.test(a);if(b)return!0;var c=a.match(/^[\s()+-]*([0-9][\s()+-]*){10,20}(( x| ext)\d{1,5}){0,1}$/);return null!=c&&c.length>0},isValidURL:function(a){var b=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/;return b.test(a)},isValidPassword:function(a){var b=a.match(/[0-9]/);return a.length>=4&&b}},q=function(a){var b={};return b.sortFields=function(b,c,d,e){var f=[],g=null,h=null;c=c.slice(),null!=d&&(c=c.filter(function(a){return a.form==d}));for(var i=0;i<c.length&&(g=c[i],h=b[g.name],f.push(a.extend({value:h},g)),!(null!=e&&f.length>=e));i++);return f},b.stringifyOrdered=function(a){if(keys=[],a)for(var b in a)keys.push(b);keys.sort();var b,c={};for(var d in keys)b=keys[d],c[b]=a[b];return JSON.stringify(c)},b.areEqual=function(a,c){return b.stringifyOrdered(a||{})==b.stringifyOrdered(c||{})},b.badgeify=function(a){return a>100?"100+":a>10?"10+":a>0?""+a:""},b.getLoginName=function(a,b){var c=/[\s-]*/gim;return a.latinise().toLowerCase().replace(c,"")+"."+b.latinise().toLowerCase().replace(c,"")},b.getUrlParam=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.href);return d?decodeURIComponent(d[1].replace(/\+/g," ")):null},b.getParsedLines=function(b){if(b&&b.length>0){var c=b.split(/\s*([,;\r\n]+|\s\s)\s*/);return c.filter(function(b,c,d){return b.length>0&&b.indexOf(",")<0&&b.indexOf(";")<0&&a.trim(b).length>0&&d.indexOf(b)>=c})}return[]},b}(a),r=function(){var a=function(){function a(a,b){var c=b.trim();return/^<\/?(ul|ol|li|h|p|bl)/i.test(c)?"\n"+b+"\n":"\n<p>"+c+"</p>\n"}function b(a,b){return"\n<ul>\n	<li>"+b.trim()+"</li>\n</ul>"}function c(a,b){return"\n<ol>\n	<li>"+b.trim()+"</li>\n</ol>"}function d(a,b,c){return"\n<blockquote>"+c.trim()+"</blockquote>"}function e(a,b,c){var d=b.length;return"<h"+d+">"+c.trim()+"</h"+d+">"}this.rules=[{regex:/(#+)(.*)/g,replacement:e},{regex:/!\[([^\[]+)\]\(([^\)]+)\)/g,replacement:"<img src='$2' alt='$1'>"},{regex:/\[([^\[]+)\]\(([^\)]+)\)/g,replacement:"<a href='$2'>$1</a>"},{regex:/(\*\*|__)(.*?)\1/g,replacement:"<strong>$2</strong>"},{regex:/(\*|_)(.*?)\1/g,replacement:"<em>$2</em>"},{regex:/\~\~(.*?)\~\~/g,replacement:"<del>$1</del>"},{regex:/\:\"(.*?)\"\:/g,replacement:"<q>$1</q>"},{regex:/`(.*?)`/g,replacement:"<code>$1</code>"},{regex:/\n\*(.*)/g,replacement:b},{regex:/\n[0-9]+\.(.*)/g,replacement:c},{regex:/\n(&gt;|\>)(.*)/g,replacement:d},{regex:/\n-{5,}/g,replacement:"\n<hr />"},{regex:/\n([^\n]+)\n/g,replacement:a},{regex:/<\/ul>\s?<ul>/g,replacement:""},{regex:/<\/ol>\s?<ol>/g,replacement:""},{regex:/<\/blockquote><blockquote>/g,replacement:"\n"}],this.addRule=function(a,b){a.global=!0,a.multiline=!1,this.rules.push({regex:a,replacement:b})},this.render=function(a){return a="\n"+a+"\n",this.rules.forEach(function(b){a=a.replace(b.regex,b.replacement)}),a.trim()}};window.Slimdown=a}(),s=function(a,b){return{getKitStatus:function(b){var c={},d=[],e={},f=[];return a.each(b,function(a,b){c[b.status]||(c[b.status]=!0,d.push(b.status)),e[b.order]||(e[b.order]=!0,f.push(b.order))}),1==d.length&&f.length<=1?d[0]:"incomplete"},getFriendlyKitStatus:function(a){return"incomplete"==a?"Incomplete":b.getFriendlyItemStatus(a)},getKitStatusCss:function(a){return"incomplete"==a?"label-incomplete":b.getItemStatusCss(a)},getKitIds:function(b){var c={},d=[];return a.each(b,function(a,b){if(b.kit){var e="string"==typeof b.kit?b.kit:b.kit._id;c[e]||(c[e]=!0,d.push(e))}}),d}}}(a,j),t=function(a){return{getContactImageUrl:function(b,c,d,e){return"maintenance"==c.kind?a.getMaintenanceAvatar(d):c.user&&c.user.picture?a.getImageUrl(b,c.user.picture,d,e):a.getAvatarInitial(c.name,d)}}}(m),u=function(a){return{getUserImageUrl:function(b,c,d,e){return c&&c.picture?a.getImageUrl(b,c.picture,d,e):a.getAvatarInitial(c.name,d)}}}(m),v=function(a){return{getFriendlyTemplateStatus:function(a){switch(a){case"inactive":return"Inactive";case"active":return"Active";case"archived":return"Archived";default:return"Unknown"}},getFriendlyTemplateCss:function(a){switch(a){case"inactive":return"label-inactive";case"active":return"label-active";case"archived":return"label-archived";default:return""}},getFriendlyTemplateSize:function(a){return 0==a.width||0==a.height?"":"inch"==a.unit&&8.5==a.width&&11==a.height?"US Letter":(a.unit="mm")&&210==a.width&&297==a.height?"A4":a.width+a.unit+" x "+a.height+a.unit}}}(b),w=function(){var a=localStorage.setItem,b=localStorage.getItem,c=localStorage.removeItem;Storage.prototype.setItem=function(b,c){try{a.apply(this,[b,c])}catch(d){return!1}return!0},Storage.prototype.getItem=function(a){try{return b.apply(this,[a])}catch(c){}return null},Storage.prototype.removeItem=function(a){try{c.apply(this,[a])}catch(b){return!1}return!0}}(),x={containsValue:function(a,b){if(a=a||{},b=$.trim(b).toLowerCase(),a.name&&-1!=a.name.toLowerCase().indexOf(b))return!0;if(a.fields){var c=Object.values(a.fields).find(function(a){return-1!=a.toString().indexOf(b)});if(c)return!0}if(a.codes){var c=a.codes.find(function(a){return-1!=a.indexOf(b)});if(c)return!0}return!1}},y=function(a){return{getTransactionSummary:function(b,c){if(b){if(b.name)return b.name;if(b.itemSummary)return b.itemSummary;if(b.items&&b.items.length>0)return a.getCategorySummary(b.items)}return c||"No items"}}}(l),z=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return a.extend({},b,c,d,e,f,g,h,i,k,l,n,o,p,q,s,t)}(a,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y),A=function(a,b,c,d){var e=2048;a.ajaxSetup({cache:!1});var f={};return f.NetworkNotConnected=function(a,b){this.code=999,this.message=a||"Connection interrupted",this.opt=b},f.NetworkNotConnected.prototype=new Error,f.NetworkTimeout=function(a,b){this.code=408,this.message=a||"Could not reach the server in time",this.opt=b},f.NetworkTimeout.prototype=new Error,f.ApiError=function(a,b){this.code=500,this.message=a||"Something went wrong on the server",this.opt=b},f.ApiError.prototype=new Error,f.ApiNotFound=function(a,b){this.code=404,this.message=a||"Could not find what you're looking for",this.opt=b},f.ApiNotFound.prototype=new Error,f.ApiBadRequest=function(a,b){this.code=400,this.message=a||"The server did not understand your request",this.opt=b},f.ApiBadRequest.prototype=new Error,f.ApiUnauthorized=function(a,b){this.code=401,this.message=a||"Your session has expired",this.opt=b},f.ApiUnauthorized.prototype=new Error,f.ApiForbidden=function(a,b){this.code=403,this.message=a||"You don't have sufficient rights",this.opt=b},f.ApiForbidden.prototype=new Error,f.ApiUnprocessableEntity=function(a,b){this.code=422,this.message=a||"Some data is invalid",this.opt=b},f.ApiUnprocessableEntity.prototype=new Error,f.ApiPaymentRequired=function(a,b){this.code=402,this.message=a||"Your subscription has expired",this.opt=b},f.ApiPaymentRequired.prototype=new Error,f.ApiServerCapicity=function(a,b){this.code=503,this.message=a||"Back-end server is at capacity",this.opt=b},f.ApiServerCapicity.prototype=new Error,f.ApiAjax=function(a){a=a||{},this.useJsonp=null!=a.useJsonp?a.useJsonp:!0,this.timeOut=a.timeOut||1e4,this.responseInTz=!0},f.ApiAjax.prototype.get=function(a,b){return this.useJsonp?this._getJsonp(a,b):this._getAjax(a,b)},f.ApiAjax.prototype.post=function(a,b,c){if(this.useJsonp)throw"ApiAjax cannot post while useJsonp is true";return this._postAjax(a,b,c)},f.ApiAjax.prototype._handleAjaxSuccess=function(a,b,c){return this.responseInTz&&(b=this._fixDates(b)),a.resolve(b)},f.ApiAjax.prototype._handleAjaxError=function(a,b,c,d,e){if("abort"!=c){var g=null;if("timeout"===d)a.reject(new f.NetworkTimeout(g,e));else switch(b&&(b.statusText&&b.statusText.indexOf("Notify user:")>-1&&(g=b.statusText.slice(b.statusText.indexOf("Notify user:")+13)),422==b.status&&b.responseText&&b.responseText.match(/HTTPError: \(.+\)/g).length>0&&(e={detail:b.responseText.match(/HTTPError: \(.+\)/g)[0]})),b.status){case 400:a.reject(new f.ApiBadRequest(g,e));break;case 401:a.reject(new f.ApiUnauthorized(g,e));break;case 402:a.reject(new f.ApiPaymentRequired(g,e));break;case 403:a.reject(new f.ApiForbidden(g,e));break;case 404:a.reject(new f.ApiNotFound(g,e));break;case 408:a.reject(new f.NetworkTimeout(g,e));break;case 422:a.reject(new f.ApiUnprocessableEntity(g,e));break;case 503:a.reject(new f.ApiServerCapicity(g,e));break;case 500:default:a.reject(new f.ApiError(g,e))}}},f.ApiAjax.prototype._postAjax=function(b,c,d,e){var f=a.Deferred(),g=this,h=a.ajax({type:"POST",url:b,data:JSON.stringify(this._prepareDict(c)),contentType:"application/json; charset=utf-8",timeout:d||this.timeOut,success:function(a){return g._handleAjaxSuccess(f,a,e)},error:function(a,b,c){return g._handleAjaxError(f,a,b,c,e)}}),i=f.promise();return i.abort=function(){h.abort()},i},f.ApiAjax.prototype._getAjax=function(b,c,d){var e=a.Deferred(),f=this,g=a.ajax({url:b,timeout:c||this.timeOut,success:function(a){return f._handleAjaxSuccess(e,a,d)},error:function(a,b,c){return f._handleAjaxError(e,a,b,c,d)}}),h=e.promise();return h.abort=function(){g.abort()},h},f.ApiAjax.prototype._getJsonp=function(b,c,d){var e=a.Deferred(),g=this,h=a.jsonp({url:b,type:"GET",timeout:c||this.timeOut,dataType:" jsonp",callbackParameter:"callback",success:function(a,b,c){return g._handleAjaxSuccess(e,a)},error:function(a,b){e.reject(new f.ApiError(null,d))}}),i=e.promise();return i.abort=function(){h.abort()},i},f.ApiAjax.prototype._prepareDict=function(b){return b?(a.each(b,function(a,d){c.isMoment(d)&&(b[a]=d.toJSONDate())}),b):{}},f.ApiAjax.prototype._fixDates=function(b){if("string"==typeof b||b instanceof String){if(b.endsWith("+00:00")){var d=b.length;if(25==d)return c(b.substring(0,d-6));if(32==d)return c(b.substring(0,d-6).split(".")[0])}}else if(b instanceof Object||a.isArray(b)){var e=this;a.each(b,function(a,c){b[a]=e._fixDates(c)})}return b},f.ApiUser=function(a){a=a||{},this.userId=a.userId||"",this.userToken=a.userToken||"",this.tokenType=a.tokenType||""},f.ApiUser.prototype.fromStorage=function(){this.userId=window.localStorage.getItem("userId")||"",this.userToken=window.localStorage.getItem("userToken")||"",this.tokenType=window.localStorage.getItem("tokenType")||""},f.ApiUser.prototype.toStorage=function(){window.localStorage.setItem("userId",this.userId),window.localStorage.setItem("userToken",this.userToken),window.localStorage.setItem("tokenType",this.tokenType)},f.ApiUser.prototype.removeFromStorage=function(){window.localStorage.removeItem("userId"),window.localStorage.removeItem("userToken"),window.localStorage.removeItem("tokenType")},f.ApiUser.prototype.clearToken=function(){window.localStorage.setItem("userToken",null),window.localStorage.setItem("tokenType",null)},f.ApiUser.prototype.isValid=function(){return this.userId&&this.userId.length>0&&this.userToken&&this.userToken.length>0},f.ApiUser.prototype._reset=function(){this.userId="",this.userToken="",this.tokenType=""},f.ApiAuth=function(a){a=a||{},this.urlAuth=a.urlAuth||"",this.ajax=a.ajax,this.version=a.version},f.ApiAuth.prototype.authenticate=function(b,c){var d=this.urlAuth+"?"+a.param({user:b,password:c,auth_v:2,_v:this.version}),e=a.Deferred();return this.ajax.get(d,3e4).done(function(a){"OK"==a.status?e.resolve(a.data):e.reject(a)}).fail(function(a){e.reject(a)}),e.promise()},f.ApiAuthV2=function(a){a=a||{},this.urlAuth=a.urlAuth||"",this.ajax=a.ajax,this.version=a.version},f.ApiAuthV2.prototype.authenticate=function(b,c){var d=this.urlAuth+"?"+a.param({user:b,password:c,auth_v:2,_v:this.version}),e=a.Deferred();return this.ajax.get(d,3e4).done(function(a){if("OK"==a.status)e.resolve(a.data);else{var b=null;b=a.message&&a.message.indexOf("expired")>0?new f.ApiPaymentRequired(a.message):new Error("Your username or password is not correct"),e.reject(b)}}).fail(function(a){e.reject(a)}),e.promise()},f.ApiAnonymous=function(a){a=a||{},this.ajax=a.ajax,this.urlApi=a.urlApi||"",this.version=a.version},f.ApiAnonymous.prototype.call=function(b,c,d,e){this.version&&(c=c||{},c._v=this.version);var f=this.urlApi+"/"+b+"?"+a.param(this.ajax._prepareDict(c));return this.ajax.get(f,d,e)},f.ApiAnonymous.prototype.longCall=function(a,b,c){return this.call(a,b,3e4,c)},f.ApiDataSource=function(a){a=a||{},this.collection=a.collection||"",this.urlApi=a.urlApi||"",this.user=a.user,this.ajax=a.ajax,this.version=a.version;var b=null!=this.user.tokenType&&this.user.tokenType.length>0?this.user.tokenType:"null";this._baseUrl=this.urlApi+"/"+this.user.userId+"/"+this.user.userToken+"/"+b+"/"+this.collection+"/"},f.ApiDataSource.prototype.exists=function(b,c){var d="exists",e=a.Deferred(),g=this,h=this.getBaseUrl()+b,i=this.getParams(c);return a.isEmptyObject(i)||(h+="?"+this.getParams(i)),this._ajaxGet(d,h).done(function(a){e.resolve(a)}).fail(function(a){g.ajax.useJsonp?e.resolve(null):a instanceof f.ApiNotFound?e.resolve(null):e.reject(a)}),e.promise()},f.ApiDataSource.prototype.get=function(b,c){var d="get",e=this.getBaseUrl()+b,f=this.getParamsDict(c);

return a.isEmptyObject(f)||(e+="?"+this.getParams(f)),this._ajaxGet(d,e)},f.ApiDataSource.prototype.getIgnore404=function(b,c){var d=this,e=a.Deferred();return this.get(b,c).done(function(a){e.resolve(a)}).fail(function(a){d.ajax.useJsonp?e.resolve(null):a instanceof f.ApiNotFound?e.resolve(null):e.reject(a)}),e.promise()},f.ApiDataSource.prototype.getMultiple=function(b,c){var d="getMultiple",e=this.getBaseUrl()+b.join(",")+",",f=this.getParamsDict(c);return a.isEmptyObject(f)||(e+="?"+this.getParams(f)),this._ajaxGet(d,e)},f.ApiDataSource.prototype["delete"]=function(a){var b="delete",c=this.getBaseUrl()+a+"/delete";return this._ajaxGet(b,c)},f.ApiDataSource.prototype.deleteMultiple=function(a){var b="deleteMultiple",c=this.getBaseUrl()+a.join(",")+"/delete";return this._ajaxGet(b,c)},f.ApiDataSource.prototype.update=function(b,c,d){var e="update",f=this.getBaseUrl()+b+"/update",g=a.extend({},c);return null!=d&&d.length>0&&(g._fields=a.isArray(d)?d.join(","):d),f+="?"+this.getParams(g),this._ajaxGet(e,f)},f.ApiDataSource.prototype.create=function(b,c){var d="create",e=this.getBaseUrl()+"create",f=a.extend({},b);return null!=c&&c.length>0&&(f._fields=a.isArray(c)?c.join(","):c),e+="?"+this.getParams(f),this._ajaxGet(d,e)},f.ApiDataSource.prototype.createMultiple=function(b,c){var d=a.Deferred(),e=this,f=b.slice(0),g=[],h=function(a){if(a.length>0){var b=a.pop();e.create(b,c).done(function(b){return g.push(b._id),h(a)}).fail(function(a){d.reject(a)})}else d.resolve(g)};return h(f),d.promise()},f.ApiDataSource.prototype.list=function(b,c,d,e,f){b=b||"";var g="list."+b,h=this.getBaseUrl();null!=b&&b.length>0&&(h+="list/"+b+"/");var i=this.getParamsDict(c,d,e,f);return a.isEmptyObject(i)||(h+="?"+this.getParams(i)),this._ajaxGet(g,h)},f.ApiDataSource.prototype.search=function(a,b,c,d,e,f){var g="search",h=this.searchUrl(a,b,c,d,e,f);return this._ajaxGet(g,h)},f.ApiDataSource.prototype.searchUrl=function(b,c,d,e,f,g){var h=this.getBaseUrl()+"search",i=a.extend(this.getParamsDict(c,d,e,f),b);return null!=g&&g.length>0&&(i.mimeType=g),h+="?"+this.getParams(i)},f.ApiDataSource.prototype.call=function(b,c,d,f,g,h){var i="call."+c,j=null!=b&&b.length>0?this.getBaseUrl()+b+"/call/"+c:this.getBaseUrl()+"call/"+c,k=a.extend({},this.getParamsDict(f,null,null,null),d),l=j+"?"+this.getParams(k);return h||l.length>=e?this._ajaxPost(i,j,k,g):this._ajaxGet(i,l,g)},f.ApiDataSource.prototype.callMultiple=function(b,c,d,f,g,h){var i="call."+c,j=this.getBaseUrl()+b.join(",")+"/call/"+c,k=a.extend({},this.getParamsDict(f,null,null,null),d),l=j+"?"+this.getParams(k);return h||l.length>=e?this._ajaxPost(i,j,k,g):this._ajaxGet(i,l,g)},f.ApiDataSource.prototype.longCall=function(a,b,c,d,e){return this.call(a,b,c,d,3e4,e)},f.ApiDataSource.prototype.getBaseUrl=function(){return this._baseUrl},f.ApiDataSource.prototype.getParams=function(b){return a.param(this.ajax._prepareDict(b))},f.ApiDataSource.prototype.getParamsDict=function(b,c,d,e){var f={};return b&&(f._fields=a.isArray(b)?b.join(","):b.replace(/\s/g,"")),c&&(f._limit=c),d&&(f._skip=d),e&&(f._sort=e),this.version&&(f._v=this.version),f},f.ApiDataSource.prototype._ajaxGet=function(a,b,c){return this.ajax.get(b,c,{coll:this.collection,cmd:a})},f.ApiDataSource.prototype._ajaxPost=function(a,b,c,d){return this.ajax.post(b,c,d,{coll:this.collection,cmd:a})},f}(a,d,b,z),B=function(a,b,c,d,e,f){var g="1215_cr_90",h="yearly",i="attempt",j="trial",k=function(a){this.ds=a.ds||new c.ApiAnonymous({urlApi:d.urlApi,ajax:new c.ApiAjax({useJsonp:d.useJsonp})}),this.firstName=a.firstName||"",this.lastName=a.lastName||"",this.company=a.lastName||"",this.timezone=a.timezone||b.determine().name(),this.email=a.email||"",this.login=a.login||"",this.password=a.password||"",this.plan=a.plan||g,this.period=a.plan||h,this.source=a.source||"",this.phone=a.phone||"",this.industry=a.industry||"",this.onBeforeCreateAccount=a.onBeforeCreateAccount,this.onCreatedAccount=a.onCreatedAccount,this.onBeforeActivateAccount=a.onBeforeActivateAccount,this.onActivatedAccount=a.onActivatedAccount};return k.prototype.validContactInfo=function(){return this.firstNameIsValid()&&this.lastNameIsValid()&&this.companyIsValid()&&this.emailIsValid()},k.prototype.validCredentials=function(){return this.loginIsValid()&&this.passwordIsValid()},k.prototype.firstNameIsValid=function(){var b=a.trim(this.firstName);return b.length>=2&&b.length<=25},k.prototype.lastNameIsValid=function(){var b=a.trim(this.lastName);return b.length>=2&&b.length<=25},k.prototype.companyIsValid=function(){var b=a.trim(this.company);return b.length>=3&&b.length<=50},k.prototype.companyExists=function(){var a=this.getGroupId();return this.ds.call("accountExists",{account:a}).then(function(a){return a.result})},k.prototype.emailIsValid=function(){return e.isValidEmail(this.email)},k.prototype.emailExists=function(){return this.emailIsValid()?this.ds.call("emailExists",{email:this.email}).then(function(a){return a.result}):a.Deferred().resolve(!0)},k.prototype.loginIsValid=function(){var a=this.login.NoWhiteSpaceInWord().OnlyAlphaNumSpaceUnderscoreAndDot();return a.length>=4&&a==this.login},k.prototype.loginExists=function(){return this.loginIsValid()?this.ds.call("loginExists",{login:this.login}).then(function(a){return a.result}):a.Deferred().resolve(!0)},k.prototype.passwordIsValid=function(){return e.isValidPassword(a.trim(this.password))},k.prototype.phoneIsValid=function(){return e.isValidPhone(a.trim(this.phone))},k.prototype.getGroupId=function(){var b=a.trim(this.company);return b.OnlyAlphaNumSpaceAndUnderscore()},k.prototype.getFullName=function(){var b=a.trim(this.firstName),c=a.trim(this.lastName);return b+" "+c},k.prototype.createAccount=function(){var b=this,c=this.onBeforeCreateAccount||a.Deferred().resolve(),d=this.onCreatedAccount||a.Deferred().resolve();return c().then(function(){return b.ds.longCall("createAccount",{kind:j,period:a.trim(b.period),plan:a.trim(b.plan),company:a.trim(b.company),groupId:b.getGroupId()}).then(function(a){return d(a)})})},k.prototype.activateAccount=function(){var b=this,c=this.onBeforeActivateAccount||a.Deferred().resolve(),d=this.onActivatedAccount||a.Deferred().resolve();return c().then(function(){return b.ds.longCall("activateAccount",{groupId:b.getGroupId(),name:b.getFullName(),login:a.trim(b.login),password:a.trim(b.password),timezone:a.trim(b.timezone),load_sample:!1,owner_customer:!0,maintenance_customer:!0}).then(function(a){return d(a)})})},k.fromQueryString=function(){var a=f.getUrlParam("name","").capitalize(),c=f.getUrlParam("email",""),d=f.getUrlParam("company",""),e=f.getUrlParam("firstName","").capitalize(),j=f.getUrlParam("lastName","").capitalize(),l=f.getUrlParam("login","").toLowerCase(),m=f.getUrlParam("source",i),n=f.getUrlParam("plan",g),o=f.getUrlParam("period",h),p=f.getUrlParam("period",b.determine().name());if(0==e.length&&0==j.length&&a.length>0){var q=a.split(" ");e=q.shift(),j=q.join(" ")}return 0==l.length&&e.length>0&&j.length>0&&(l=f.getLoginName(e,j)),new k({name:a,email:c,company:d,timezone:p,firstName:e,lastName:j,login:l,source:m,plan:n,period:o})},k}(a,c,A,f,p,q),core});